!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Position=class{constructor(t,e){this.i=t,this.j=e}isNear(t){return!(Math.abs(t.i-this.i)>1||Math.abs(t.j-this.j)>1||t.i==this.i&&t.j==this.j)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(2),n=i(3),o=i(4);let l=1e3,r=500,h=Math.ceil(70*r/100),c=Math.ceil(12*l/100);Math.ceil(30*r/100/2),Math.ceil(12*l/100),Math.ceil(60*h/100),Math.ceil(c/2),Math.ceil(l-c/2),Math.ceil(2*r/100);window.onload=function(){let t=document.getElementById("text-penta"),e=document.getElementById("btn-convert"),i=document.getElementById("errors"),l=document.getElementById("warnings"),r=document.getElementById("success"),h=document.getElementById("penta-representation"),c=h.getContext("2d"),a=new s.Playground(h,c,new n.Styles(20,20));e.onclick=(()=>{let e=o.Serializer.serialize(t.value);a.drawPentatonic(e,i,l,r)})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Playground=class{constructor(t,e,i){this.offsetX=30,this.offsetY=30,this.canvasElement=t,this.totalWidth=this.canvasElement.width,this.context=e,this.styles=i,this.canvasElement.style.border=this.styles.borderWidth+"px solid "+this.styles.borderColor,this.canvasElement.style.margin="auto 25px",this.canvasElement.style.background=this.styles.background}setGroundStyles(){console.log("Width is "+this.totalWidth),this.canvasElement.style.border=this.styles.borderWidth+"px solid "+this.styles.borderColor,this.canvasElement.style.margin="auto 25px",this.canvasElement.style.background=this.styles.background}drawCenterSpot(t,e,i){this.context.beginPath(),this.context.arc(t,e,i,0,2*Math.PI),this.context.fillStyle=this.styles.fillColor,this.context.fill(),this.context.lineWidth=this.styles.lineWidth,this.context.strokeStyle=this.styles.borderColor,this.context.stroke()}drawCorner(t,e){this.context.beginPath(),this.context.arc(t,e,10,0,2*Math.PI),this.context.fillStyle=this.styles.fillColor,this.context.fill(),this.context.lineWidth=this.styles.lineWidth,this.context.strokeStyle=this.styles.borderColor,this.context.stroke()}writeText(t,e,i,s=this.styles.font.Default,n=this.styles.textColor){this.context.font=s,this.context.fillStyle=n,this.context.fillText(t,e,i)}drawLine(t,e,i,s){this.context.beginPath(),this.context.moveTo(t,e),this.context.lineTo(i,s),this.context.stroke(),this.context.lineWidth=this.styles.borderWidth,this.context.fillStyle=this.styles.borderColor,this.context.fill()}drawArrowLine(t,e,i,s,n=!1){let o;this.context.beginPath(),this.context.moveTo(t,e),this.context.lineTo(i,s),this.context.strokeStyle=this.styles.fillColor,this.context.lineWidth=this.styles.lineWidth,this.context.stroke();let l=i,r=s;if(n)for(o=0;o<=2;o++)t=l,e=0==o||2==o?r+4:r-4,i=2==o?l:l-4,s=2==o?r-4:r,this.context.beginPath(),this.context.moveTo(t,e),this.context.lineTo(i,s),this.context.lineWidth=2,this.context.strokeStyle=this.styles.fillColor,this.context.stroke();else for(o=0;o<=2;o++)t=l,e=0==o||2==o?r-4:r+4,i=2==o?l:l+4,s=2==o?r+4:r,this.context.beginPath(),this.context.moveTo(t,e),this.context.lineTo(i,s),this.context.lineWidth=this.styles.lineWidth,this.context.strokeStyle=this.styles.fillColor,this.context.stroke()}drawRectangleThinLine(t,e,i,s){this.context.beginPath(),this.context.fillStyle=this.styles.fillColor,this.context.fill(),this.context.fillRect(t,e,i,s),this.context.lineWidth=this.styles.lineWidth,this.context.strokeStyle=this.styles.lineColor,this.context.strokeRect(t,e,i,s)}drawRectangleBorderLine(t,e,i,s){this.context.beginPath(),this.context.fillStyle=this.styles.fillColor,this.context.fill(),this.context.fillRect(t,e,i,s),this.context.lineWidth=this.styles.borderWidth,this.context.strokeStyle=this.styles.borderColor,this.context.strokeRect(t,e,i,s)}drawPentatonic(t,e,i,s){console.log("trying to draw: ",t),console.log("errors: "+t.errors),console.log("Warnings: "+t.warnings),e.textContent=t.errors.join("<br>"),i.textContent=t.warnings.join("<br>"),0==t.errors.length&&0==t.warnings.length?s.textContent="Success!":s.textContent="";let n=t.penta;this.cellSize=(this.totalWidth-2*this.offsetX)/n.columns;let o=this.totalWidth*n.lines/n.columns;this.canvasElement.setAttribute("height",o.toString()),this.drawEachCell(n),this.drawVerticalSeparations(n),this.drawHorizontalSeparations(n)}drawEachCell(t){this.drawRectangleBorderLine(this.offsetX,this.offsetY,t.columns*this.cellSize,t.lines*this.cellSize);for(let e=0;e<t.lines;e++)for(let i=0;i<t.columns;i++)this.drawRectangleThinLine(this.offsetX+i*this.cellSize,this.offsetY+e*this.cellSize,this.cellSize,this.cellSize)}drawVerticalSeparations(t){for(let e=0;e<t.lines;e++)for(let i=1;i<t.columns;i++)t.cells[e][i].area.id!=t.cells[e][i-1].area.id?(console.log("("+e+","+(i-1)+") et ("+e+","+i+") ne sont PAS dans la meme zone "),this.drawLine(this.offsetX+i*this.cellSize,this.offsetY+e*this.cellSize,this.offsetX+i*this.cellSize,this.offsetY+(e+1)*this.cellSize)):console.log("("+e+","+(i-1)+") et ("+e+","+i+") SONT dans la meme zone ")}drawHorizontalSeparations(t){for(let e=0;e<t.columns;e++)for(let i=1;i<t.lines;i++)t.cells[i][e].area.id!=t.cells[i-1][e].area.id&&this.drawLine(this.offsetX+e*this.cellSize,this.offsetY+i*this.cellSize,this.offsetX+(e+1)*this.cellSize,this.offsetY+i*this.cellSize)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Styles=class{constructor(t,e){this.widthCell=t,this.heightCell=e,this.background="#9a2424",this.borderColor="#343653",this.lineWidth=2,this.borderWidth=10,this.fillColor="#fff0e6",this.textColor="#00639f",this.lineColor="#6dc2ff",this.font={Default:"12px 'Segoe UI',Arial,sans-serif",Heading:"14px 'Segoe UI',Arial,sans-serif"}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(5),n=i(7),o=i(8),l=i(0),r=i(9),h=i(10);class c{static serialize(t){let e=new s.PentaWarningError,i=e.penta;console.log("We want to serialize: "+t);let n=t.split(/[\r\n]+/);if(n.length<this.minLines)return e.addError("Text for penta should contain: \nauthor, nbLine nbCols, penta"),e;i.author=n[0].trim(),console.log("Author is :"+i.author);let o=n[1].trim().split(" ").map(t=>Number(t));return console.log("We have lineCol: "+o),2!=o.length?(e.addError('2nd line should provide nb of lines and columns like this "<nbLines> <nbCols>"'),e):(i.lines=o[0],i.columns=o[1],n.length<this.minLines+i.lines?(e.addError("You didn't provide a pentatonic with "+i.lines+" lines"),e):(this.fillAreas(e,n,2),this.fillEnonce(e,n,2+i.lines),e))}static fillAreas(t,e,i){let s,l={};for(let r=i;r<i+t.penta.lines;r++){if(""==(s=e[r].trim())||null==s)continue;let i=[];s.length!=t.penta.columns&&t.addWarning("Check the number of cells for this line: "+s);for(let e=0;e<t.penta.columns;e++){if(s.length<=e){t.addError("Please check the number of columns you provided fo each line of the pentatonic (index"+e+">="+t.penta.columns+": for the line "+s+")");break}if(e>t.penta.columns){t.addError("Please check the number of columns you provided fo each line of the pentatonic ("+e+">"+t.penta.columns+")");break}let h=new o.Cell(r,e),c=l[s[e]];null==c&&(c=new n.Area(s[e]),l[s[e]]=c),h.area=c,i.push(h)}t.penta.cells.push(i)}t.penta.fillAreaSize()}static fillEnonce(t,e,i){let s,n=e.length,o={};for(let h=i;h<n;h++){if(""==(s=e[h].trim()))continue;if(s.startsWith("-")){let e=s.substr(1).split(",").map(t=>+t);if(4!=e.length){t.addError('For a diffOne, you should have 4 numbers: "-i1,j1,i2,j2" for example. But you typed "'+s+'"');continue}let i=new l.Position(e[0],e[1]),n=new l.Position(e[2],e[3]);if(i==n){t.addError('Difference one should concern 2 different positions. But you typed "'+s+'"');continue}i.isNear(n)||t.addWarning('Difference one should concert 2 near positions. But you typed "'+s+'"'),t.penta.diffOnes.push(new r.Diff(i,n));continue}let i=s.split(",");if(3!=i.length){t.addError("Bad input, should be n,i,j, but was "+s);continue}if(1!=i[0].length){t.addError("Bad input: "+i[0]+" in line "+s);continue}let n=i[0],c=+i[1],a=+i[2],d=t.penta.cells[c][a],u=+n;if(Number.isNaN(u))null==o[n]?o[n]=[new l.Position(c,a)]:o[n].push(new l.Position(c,a));else{console.log("nb is "+n);let t=+n;console.log("Success converting nb to number: "+t),d.values.push(n)}}for(let e in o)t.penta.sisters.push(new h.Sister(e,e,o[e]))}}c.minLines=2,e.Serializer=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(6);e.PentaWarningError=class{constructor(){this.penta=new s.Pentatonic,this.warnings=[],this.errors=[]}addWarning(t){this.warnings.push(t)}addError(t){this.errors.push(t)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Pentatonic=class{constructor(t=0,e=0){this.id=0,this.version=0,this.areas="",this.difficulty=0,this.author="",this.filename="",this.lines=t,this.columns=e,this.cells=[],this.diffOnes=[],this.sisters=[]}fillAreaSize(){this.getAllAreas().forEach(t=>{let e=this.getAreaCells(t),i=e.size;e.forEach(t=>t.area.size=i)})}cellArray(){let t=[];for(let e of this.cells)for(let i of e)t.push(i);return t}getAllAreas(){let t=new Set;return this.cellArray().forEach(e=>{t.add(e.area)}),t}getAreaCells(t){return new Set(this.cellArray().filter(e=>e.area.id==t.id))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Area=class{constructor(t="0",e=0){this.id=t,this.size=e}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(0);e.Cell=class{constructor(t,e){this.position=new s.Position(t,e),this.values=[]}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Diff=class{constructor(t,e){this.position1=t,this.position2=e}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Sister=class{constructor(t,e,i){this.id=t,this.symbol=e,this.positions=i}}}]);
//# sourceMappingURL=bundle.js.map